if(!window.LChart){throw new Error("未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n"+"Not loaded loongchart.core.js which must be loaded before other LChart's js.")}else{LChart.Const.Skins.BlackAndWhite.QueueBar={LabelColor:null}}LChart.QueueBar=LChart.getCore().__extends({GraphType:"QueueBar"});LChart.QueueBar._spreadSkin=function(b,a){b.label={};b.label.color=a.LabelColor||null};LChart.QueueBar._getDefaultOptions=function(b){var a=LChart.Methods.Extend(b,{animateY:true,animateX:true,splitpoint:null,contrastmode:true,bar:{colors:null,length:null,gap:null,useSameColor:true},label:{show:true,content:function(c){if(this.valueType=="d"){return c.value.format("MM-dd")}else{if(this.valueType=="t"){return c.value.format("hh:mm")}else{if(this.valueType=="m"){return c.value.format("mm:ss.S")}else{return c.value.toString()}}}},color:null,fontweight:null,fontsize:null,fontfamily:null}});return a};LChart.QueueBar._getCheckOptions=function(){return{__top:[["animateY","b"],["animateX","b"],["contrastmode","b"]],bar:[["colors","ca"],["length","n"],["gap","n"],["useSameColor","b"]],label:[["show","b"],["content","f"],["color","c"],["fontweight","s"],["fontsize","n"],["fontfamily","s"]]}};LChart.QueueBar._drawgraphic=function(A,k,r,f){if(f.valueType=="p"){throw new Error(A._messages.WrongParam+A._messages.ValueTypeMustNotBePercent)}var b=f.splitpoint;var v=b==null;if(k==A.ID){A._configs.computeSplitPoint=v;A._configs.invertAxis=true}var j=A._formatAxisData();if(v){b=j.splitpoint}else{j.splitpoint=b}if(j.demanCount>1&&(b>=j.vMaxval||b<=j.vMinval)){throw new Error(A._messages.WrongSet+A._messages.WrongSplitPoint)}var c=A._calculateOutersValid();var x=A._computeAxis(c);var l=(f.bar.colors&&f.bar.colors.length>0?f.bar.colors:null)||LChart.Const.Defaults.FillColors;var w=A._getDrawableCoordinate();if(!A.coordinates.bars){A.coordinates.bars={}}A.coordinates.bars[k]=[];A.shapes[k]={bars:[]};var D=A._configs.specificConfig[k];var a=f.contrastmode;var q=a?Math.ceil(j.demanCount/2-0.1):j.demanCount;var o=f.bar.gap;var g=f.bar.length;var z=q>1;if(z){if(o&&o>0){var C=(x.labelDistance-q*2)/(q+1);o=Math.min(o,C)}else{o=x.labelDistance/20}}else{o=0}if(g&&g>0){var e=z?((x.labelDistance-(q+1)*o)/q):x.labelDistance*0.8;g=Math.min(g,e)}else{g=(x.labelDistance-(q+1)*o)/(z?(q+0.5):1.5)}var d=f.shadow.show;var h=function(E){var F=null;if(d){var i=Math.max(Math.abs(f.shadow.blur),Math.abs(f.shadow.offsetX));F=LChart.Methods.DeepCopy(f.shadow);F.offsetX=E?-i:i}return F};var n=function(F,E){if(E!=undefined){var G=q/2-(a?parseInt(F/2):F);return x.startPos-x.labelDistance*E-G*g-(G-0.5)*o}else{return x.startPos-x.labelDistance*F-g/2}};if(k==A.ID){A.coordinates.draw=w;A._configs.legendColors=l;if(j.multiple){A._configs.pointsPosition={invertAxis:true,labelDistance:x.labelDistance,startPoints:[]};for(var u=0,y;y=r[u];u++){A._configs.pointsPosition[u]=n(u,0)+g/2}}}var t=function(G,F,L,i,M,I,J,H){A.DrawFigures.createRectangleFill(F,L,i,M,I,H||h(G));if(J&&f.label.show){var E=f.label;var K=typeof E.content=="function"?E.content.call(f,J):"";if(K){var P=E.fontsize||LChart.Methods.CapValue(M,18,11);var O=G?F-P/2:F+i+P/2;var N=L+M/2+P/3;A.DrawFigures.createText(K,O,N,G?"right":"left",J.fontweight||E.fontweight,J.fontsize||P,E.fontfamily,J.fontcolor||E.color)}}};var B=function(F,L,J,E,I,i,K,G,H){this.isSmall=F;this.indexX=L;this.indexY=J;this.left=E;this.top=I;this.width=i;this.height=K;this.data=H;this.isHovered=false;this.color=G;this.redraw=function(M,N){if(arguments.length==1&&typeof arguments[0]=="boolean"){N=arguments[0];M=undefined}var O=h(this.isSmall);if(O&&M){O.color=M}t(this.isSmall,this.left,this.top,this.width,this.height,M||this.color,N?this.data:null,O)};this.click=function(N){var M=typeof this.data.click=="function"?this.data.click:(f.click||null);if(M){M(this.data,N)}};if(f.tip.show&&typeof f.tip.content=="function"){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display="inline"}else{var O=this.left+this.width/2+5;var N=this.top+this.height/2;this.tip=A._createTip(f.tip.content.call(f,this.data),O,N);var M=this;M.tip.onclick=function(P){M.click(P)}}};this.hideTip=function(){if(this.tip){this.tip.style.display="none"}}}};var p=function(E,L){var P=function(U){var i=Math.abs(A._getFormatDiff(j.vValueType,b,U));var T=(f.animateX?E:1)*(x.maxX-x.minX)*i/A._getFormatDiff(j.vValueType,j.vMinValue,j.vMaxValue);return T};for(var N=0,S;S=r[N];N++){var R=(f.animateY?E:1)*g;if(j.multiple){var J=S.color||l[N%l.length];for(var K=0;K<S.value.length;K++){var G=S.value[K];if(G!=null){var I=G<b;var Q=n(N,K);var F=P(G);var H=I?x.splitLinePos-F:x.splitLinePos;if(L>=1){var M={text:S.text,label:j.lLabels[K],value:G,indexX:K,indexY:N,fontsize:S.fontsize,fontcolor:S.fontcolor,fontweight:S.fontweight,click:S.click,mouseover:S.mouseover,mouseleave:S.mouseleave};var O=new B(I,K,N,H,Q,F,R,J,M);A.shapes[k].bars.push(O);t(I,H,Q,F,R,J,M);if(!A.coordinates.bars[k][K]){A.coordinates.bars[k][K]=[]}A.coordinates.bars[k][K][N]={left:H,top:Q,width:F,height:R,color:J}
}else{t(I,H,Q,F,R,J)}}}}else{var G=S.value;if(G!=null){var I=G<b;var F=P(G);var H=I?x.splitLinePos-F:x.splitLinePos;var Q=n(N);var J=S.color||(f.bar.useSameColor?"rgba(69,114,167,1)":l[N%l.length]);if(L>=1){var M={text:S.text,value:G,indexX:N,indexY:null,fontsize:S.fontsize,fontcolor:S.fontcolor,fontweight:S.fontweight,click:S.click,mouseover:S.mouseover,mouseleave:S.mouseleave};var O=new B(I,N,null,H,Q,F,R,J,M);A.shapes[k].bars.push(O);t(I,H,Q,F,R,J,M);A.coordinates.bars[k][N]={left:H,top:Q,width:F,height:R,color:J}}else{t(I,H,Q,F,R,J)}}}}};var m=function(){var F=function(G,K){var J=null;for(var I=0,H;H=A.shapes[k].bars[I];I++){if(H.left<=G&&H.left+H.width>=G&&H.top<=K&&H.top+H.height>=K){J=H;break}}return J};var E=function(I){var I=window.event||I;var G=A._getMouseLoction(I);var H=F(G.X,G.Y);if(H){H.click(I)}};var i=function(N){var N=window.event||N;var I=A._getMouseLoction(N);var M=F(I.X,I.Y);if(M){A._configs.cursorPointer=true}if(D.currentMouseShape!=M){var J=D.currentMouseShape;if(J){var G=typeof J.data.mouseleave=="function"?J.data.mouseleave:(f.mouseleave||null);if(G){G(J.data,N)}}if(d||D.currentMouseShape){A.redrawAll()}D.currentMouseShape=M;for(var L=0,J;J=A.shapes[k].bars[L];L++){if(J!=M&&J.isHovered){J.isHovered=false;if(J.hideTip){J.hideTip()}}}if(M){M.isHovered=true;var K=f.mouseoverTransparency;M.redraw("rgba(255,255,255,"+(K>0&&K<1?K:0.2)+")");if(M.showTip){M.showTip()}var H=typeof M.data.mouseover=="function"?M.data.mouseover:(f.mouseover||null);if(H){H(M.data,N)}}}};A._addEventListener("click",E);A._addEventListener("mousemove",i)};var s=function(){for(var F=0,E;E=A.shapes[k].bars[F];F++){E.redraw(true)}};return{drawSegments:p,mouseEvents:m,redraw:s}};