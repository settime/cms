if(!window.LChart){throw new Error("未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n"+"Not loaded loongchart.core.js which must be loaded before other LChart's js.")}else{LChart.Const.Skins.BlackAndWhite.QueueHistogram3D={LabelColor:null}}LChart.QueueHistogram3D=LChart.getCore().__extends({GraphType:"QueueHistogram3D"});LChart.QueueHistogram3D._spreadSkin=function(b,a){b.label={};b.label.color=a.LabelColor||null};LChart.QueueHistogram3D._getDefaultOptions=function(b){var a=LChart.Methods.Extend(b,{animateY:true,animateX:true,splitpoint:null,contrastmode:true,histogram:{colors:null,length:null,gap:null,useSameColor:true},label:{show:true,content:function(c){if(this.valueType=="d"){return c.value.format("MM-dd")}else{if(this.valueType=="t"){return c.value.format("hh:mm")}else{if(this.valueType=="m"){return c.value.format("mm:ss.S")}else{return c.value.toString()}}}},color:null,fontweight:null,fontsize:null,fontfamily:null}});return a};LChart.QueueHistogram3D._getCheckOptions=function(){return{__top:[["animateY","b"],["animateX","b"],["contrastmode","b"]],histogram:[["colors","ca"],["length","n"],["gap","n"],["useSameColor","b"]],label:[["show","b"],["content","f"],["color","c"],["fontweight","s"],["fontsize","n"],["fontfamily","s"]]}};LChart.QueueHistogram3D._drawgraphic=function(v,i,o,e){if(e.valueType=="p"){throw new Error(v._messages.WrongParam+v._messages.ValueTypeMustNotBePercent)}v._configs.recreateAssists=true;var b=e.splitpoint;var r=b==null;if(i==v.ID){v._configs.computeSplitPoint=r}var g=v._formatAxisData();if(r){b=g.splitpoint}else{g.splitpoint=b}if(g.demanCount>1&&(b>=g.vMaxval||b<=g.vMinval)){throw new Error(v._messages.WrongSet+v._messages.WrongSplitPoint)}var c=v._calculateOutersValid();var t=v._computeAxis(c);var j=(e.histogram.colors&&e.histogram.colors.length>0?e.histogram.colors:null)||LChart.Const.Defaults.FillColors;var s=v._getDrawableCoordinate();if(i==v.ID){v.coordinates.draw=s;v._configs.legendColors=j}if(!v.coordinates.histograms){v.coordinates.histograms={}}v.coordinates.histograms[i]=[];v.shapes[i]={histograms:[]};var y=v._configs.specificConfig[i];var a=e.contrastmode;var n=a?Math.ceil(g.demanCount/2-0.1):g.demanCount;var l=e.histogram.gap;var f=e.histogram.length;var u=n>1;if(u){if(l&&l>0){var x=(t.labelDistance-n*2)/(n+1);l=Math.min(l,x)}else{l=t.labelDistance/20}}else{l=0}if(f&&f>0){var d=u?((t.labelDistance-(n+1)*l)/n):t.labelDistance*0.8;f=Math.min(f,d)}else{f=(t.labelDistance-(n+1)*l)/(u?(n+0.5):1.5)}var h=function(){var A=e.splitLine.linewidth;if(e.splitLine.show&&A&&A>0){var z=e.splitLine.linecolor||"#cccccc";var D=t.stagewidth;var C=t.minX-D*t.sinsightangle;var B=t.splitLinePos+D*t.cossightangle;v.DrawFigures.create3DHistogram(C,B,t.maxX-t.minX,A,z,0,t.sightangle,D,null,LChart.Methods.getDarkenColor(z,0.7),LChart.Methods.getDarkenColor(z,0.8))}};var q=function(I,D,G,z,B){var L=I.left-t.stagewidth*t.sinsightangle;var J=I.top+t.stagewidth*t.cossightangle;var F=D||I.color;if(z){v.DrawFigures.create3DHistogram(L,J,I.width,I.height,F,0,t.sightangle,t.stagewidth,null,G?D:I.topcolor||LChart.Methods.getDarkenColor(F,0.7),G?D:I.rightcolor||LChart.Methods.getDarkenColor(F,0.8))}if(B&&e.label.show){var A=e.label;var H=typeof A.content=="function"?A.content.call(e,I.data):"";if(H){var E=(I.left+L)/2+I.width/2;var K=A.fontsize||LChart.Methods.CapValue(I.width/2,18,11);var C=I.isSmall?J+I.height+K:I.top-K/3;v.DrawFigures.createText(H,E,C,"center",I.data.fontweight||A.fontweight,I.data.fontsize||K,A.fontfamily,I.data.fontcolor||A.color)}}};var w=function(D,J,H,C,G,A,I,E,z,B,F){this.isSmall=D;this.indexX=J;this.indexY=H;this.left=C;this.top=G;this.width=A;this.height=I;this.data=F;this.isHovered=false;this.color=E;this.topcolor=z;this.rightcolor=B;this.redraw=function(N,L,M,K){q(this,K,N,L,M)};this.click=function(L){var K=typeof this.data.click=="function"?this.data.click:(e.click||null);if(K){K(this.data,L)}};if(e.tip.show&&typeof e.tip.content=="function"){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display="inline"}else{var M=this.left;var L=this.top+this.height/2;this.tip=v._createTip(e.tip.content.call(e,this.data),M,L);if(M+this.tip.clientWidth>t.maxX){v._changeTip(this.tip,M-this.width/2-this.tip.clientWidth)}var K=this;K.tip.onclick=function(N){K.click(N)}}};this.hideTip=function(){if(this.tip){this.tip.style.display="none"}}}};var m=function(D,M){var E=function(T){var S=Math.abs(v._getFormatDiff(g.vValueType,b,T));var R=(e.animateY?D:1)*(t.maxY-t.minY)*S/v._getFormatDiff(g.vValueType,g.vMinValue,g.vMaxValue);return R};var F=M>=1;var O=[];for(var L=0,N;N=o[L];L++){var I=(e.animateX?D:1)*f;if(g.multiple){var J=N.color||j[L%j.length];var A=n/2-(a?parseInt(L/2):L);for(var K=0;K<N.value.length;K++){var Q=N.value[K];if(Q!=null){var C=Q<b;var B=t.startPos+t.labelDistance*K-A*f-(A-0.5)*l;var H=E(Q);var G=C?t.splitLinePos:t.splitLinePos-H;var P=null;if(F){P={text:N.text,label:g.lLabels[K],value:Q,indexX:L,indexY:K,fontsize:N.fontsize,fontcolor:N.fontcolor,fontweight:N.fontweight,click:N.click,mouseover:N.mouseover,mouseleave:N.mouseleave};
if(!v.coordinates.histograms[i][K]){v.coordinates.histograms[i][K]=[]}v.coordinates.histograms[i][K][L]={left:B,top:G,width:I,height:H,color:J}}var z=new w(C,L,K,B,G,I,H,J,N.topcolor,N.rightcolor,P);O.push(z)}}}else{var Q=N.value;if(Q!=null){var C=Q<b;var B=t.startPos+t.labelDistance*L-f/2;var H=E(Q);var G=C?t.splitLinePos:t.splitLinePos-H;var J=N.color||(e.histogram.useSameColor?"rgba(69,114,167,1)":j[L%j.length]);var P=null;if(F){P={text:N.text,value:Q,indexX:L,indexY:null,fontsize:N.fontsize,fontcolor:N.fontcolor,fontweight:N.fontweight,click:N.click,mouseover:N.mouseover,mouseleave:N.mouseleave};v.coordinates.histograms[i][L]={left:B,top:G,width:I,height:H,color:J}}var z=new w(C,L,null,B,G,I,H,J,N.topcolor,N.rightcolor,P);O.push(z)}}}for(var L=0,z;z=O[L];L++){if(z.isSmall){q(z,z.color,false,true)}}h();for(var L=0,z;z=O[L];L++){if(!z.isSmall){q(z,z.color,false,true)}}if(F){for(var L=0,z;z=O[L];L++){q(z,z.color,false,false,true)}v.shapes[i].histograms=O}};var k=function(){var B=function(K,J){var D=null;var F=t.cossightangle*t.stagewidth;var C=t.sinsightangle*t.stagewidth;for(var E=0,G;G=v.shapes[i].histograms[E];E++){var M=G.left-t.stagewidth*t.sinsightangle;var L=G.top+t.stagewidth*t.cossightangle;if(M<=K&&M+G.width>=K&&L<=J&&L+G.height>=J){D=G;break}}if(!D){for(var E=0,G;G=v.shapes[i].histograms[E];E++){if(G.left+G.width-C<=K&&G.left+G.width>=K){var H=G.top+F*(G.left+G.width-K)/C;if(H<=J&&H+G.height>=J){D=G;break}}}}if(!D){for(var E=0,G;G=v.shapes[i].histograms[E];E++){if(G.top<=J&&G.top+F>=J){var I=G.left-C*(J-G.top)/F;if(I<=K&&I+G.width>=K){D=G;break}}}}return D};var A=function(E){var E=window.event||E;var C=v._getMouseLoction(E);var D=B(C.X,C.Y);if(D){D.click(E)}};var z=function(J){var J=window.event||J;var E=v._getMouseLoction(J);var I=B(E.X,E.Y);if(I){v._configs.cursorPointer=true}if(y.currentMouseShape!=I){var F=y.currentMouseShape;if(F){var C=typeof F.data.mouseleave=="function"?F.data.mouseleave:(e.mouseleave||null);if(C){C(F.data,J)}}if(y.currentMouseShape){v.redrawAll()}y.currentMouseShape=I;for(var H=0,F;F=v.shapes[i].histograms[H];H++){if(F!=I&&F.isHovered){F.isHovered=false;if(F.hideTip){F.hideTip()}}}if(I){I.isHovered=true;var G=e.mouseoverTransparency;I.redraw(true,true,false,"rgba(255,255,255,"+(G>0&&G<1?G:0.2)+")");if(I.showTip){I.showTip()}var D=typeof I.data.mouseover=="function"?I.data.mouseover:(e.mouseover||null);if(D){D(I.data,J)}}}};v._addEventListener("click",A);v._addEventListener("mousemove",z)};var p=function(){for(var A=0,z;z=v.shapes[i].histograms[A];A++){if(z.isSmall){z.redraw(false,true)}}h();for(var A=0,z;z=v.shapes[i].histograms[A];A++){if(!z.isSmall){z.redraw(false,true)}}for(var A=0,z;z=v.shapes[i].histograms[A];A++){z.redraw(false,false,true)}};return{drawSegments:m,mouseEvents:k,redraw:p}};