if(!window.LChart){throw new Error("未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n"+"Not loaded loongchart.core.js which must be loaded before other LChart's js.")}else{LChart.Const.Skins.BlackAndWhite.RangeArea={NodeLineColor:"#ffffff",NodeFillColor:"#000000",AlignlineLineColor:null}}LChart.RangeArea=LChart.getCore().__extends({GraphType:"RangeArea"});LChart.RangeArea._spreadSkin=function(b,a){b.node={};b.alignline={};b.node.linecolor=a.NodeLineColor||null;b.node.fillcolor=a.NodeFillColor||null;b.alignline.linecolor=a.AlignlineLineColor||null};LChart.RangeArea._getDefaultOptions=function(b){var a=LChart.Methods.Extend(b,{invertAxis:false,area:{linecolors:null,linewidth:null,smoothline:false,fillcolors:null},labelAxis:{valueType:null,content:function(c){if(this.valueType=="d"){return c.format("yyyy-MM-dd")}else{if(this.valueType=="t"){return c.format("MM-dd hh:mm")}else{if(this.valueType=="m"){return c.format("hh:mm:ss.S")}else{return c.toString()}}}},minvalue:null,maxvalue:null,interval:null,sort:true},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:true,spotdistance:10,content:function(g,h){var c=function(j,k){if(!k){return""}var i=j.toString();if(k=="d"){i=j.format("yyyy-MM-dd")}else{if(k=="t"){i=j.format("MM-dd hh:mm")}else{if(k=="m"){i=j.format("hh:mm:ss.S")}}}return i};if(h){var e="<div>";for(var d=0,f;f=g[d];d++){if(d==0){e+=(f.min.llabel!=null?f.min.llabel:c(f.min.lvalue,this.labelAxis.valueType))+"<br/>"}e+="max, "+(f.max.text?f.max.text+" : ":"")+c(f.max.vvalue,this.valueType||"n")+"<br/>";e+="min, "+(f.min.text?f.min.text+" : ":"")+c(f.min.vvalue,this.valueType||"n")+"<br/>"}e+="</div>";return e}else{return"<div>"+(g.issmall?"min, ":"max, ")+(g.llabel!=null?g.llabel:c(g.lvalue,this.labelAxis.valueType))+"<br/>"+(g.text?g.text+" : ":"")+c(g.vvalue,this.valueType||"n")+"</div>"}}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return a};LChart.RangeArea._getCheckOptions=function(){return{__top:[["invertAxis","b"]],area:[["linecolors","ca"],["linewidth","n"],["fillcolors","ca"]],labelAxis:[["valueType","s"],["content","f"],["interval","n"],["sort","b"]],node:[["show","b"],["nodetype","s"],["linecolor","c"],["linewidth","n"],["length","n"],["fillcolor","c"]],tip:[["merge","b"],["spotdistance","n"]],alignline:[["verticalline","b"],["horizontalline","b"],["linecolor","c"]],scale:[["drawvertical","b"]]}};LChart.RangeArea._drawgraphic=function(B,j,v,f){var d=f.labelAxis.valueType;if(d=="p"){throw new Error(B._messages.WrongParam+B._messages.LabelAxisValueTypeCannotBePercent)}if(f.valueType=="p"){throw new Error(B._messages.WrongParam+B._messages.ValueTypeMustNotBePercent)}B._configs.recreateAssists=true;var u=f.invertAxis;var z=j==B.ID;if(z){B._configs.invertAxis=u;B._configs.valueAxiaDataIsRange=true}var g=B._formatAxisData();if(g.tuftCount<2){throw new Error(B._messages.WrongData+B._messages.NeedLeastTwoPoints)}var c=B._calculateOutersValid();var y=B._computeAxis(c);var x=B._getDrawableCoordinate();var q=LChart.Methods.IsNumber(f.tip.spotdistance)&&f.tip.spotdistance>0?f.tip.spotdistance:10;var p=f.alignline.linecolor||LChart.Const.Defaults.AlignLineColor;var e=(f.area.fillcolors&&f.area.fillcolors.length>0?f.area.fillcolors:null)||LChart.Const.Defaults.TransparentColors;var k=(f.area.linecolors&&f.area.linecolors.length>0?f.area.linecolors:null)||LChart.Const.Defaults.FillColors;if(z){B.coordinates.draw=x;B._configs.legendColors=k}var C=B._configs.specificConfig[j];C.mergeTips=[];C.loc=-1;if(!B.coordinates.rangearea){B.coordinates.rangearea={}}B.coordinates.rangearea[j]={nodes:[]};B.shapes[j]={nodes:[]};var h=f.tip.merge;var o={};var t=(u?y.maxX-y.minX:y.maxY-y.minY);var i=(u?y.maxY-y.minY:y.maxX-y.minX);var a=f.node.length||LChart.Methods.CapValue(i/100,10,6);var r=f.area.smoothline;var b=r?B.DrawFigures.createSmoothLine:B.DrawFigures.createPointsLine;var n=function(D,H,G,E,F){this.index=D;this.centerX=H;this.centerY=G;this.isHovered=false;this.nodelength=E;this.data=F;this.click=function(J){var I=typeof this.data.click=="function"?this.data.click:(f.click||null);if(I){I(this.data,J)}};if(f.tip.show&&typeof f.tip.content=="function"){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display="inline"}else{var K=this.centerX+a+5;var J=this.centerY-a-10;this.tip=B._createTip(f.tip.content.call(f,this.data,false),K,J);if(this.centerX+this.tip.clientWidth>y.maxX){B._changeTip(this.tip,K-5-a-this.tip.clientWidth)}var I=this;I.tip.onclick=function(L){I.click(L)}}};this.hideTip=function(){if(this.tip){this.tip.style.display="none"}}}};var m=function(K,J,M,G){var F=f.node;if(F.show){var I=G.nodelength||a;var E=G.nodetype||F.nodetype||"c";var D=G.nodelinecolor||F.linecolor||M;var L=G.nodelinewidth||F.linewidth;var H=G.nodefillcolor||F.fillcolor||M;B.DrawFigures.createPointElement(E,K,J,I,H,true,D,L,true,true)}};var A=function(G,D,F){var H=G.__copy();for(var E=D.length-1;E>=0;E--){H.push(D[E])}B.DrawFigures.createCloseFigure(H,F,0,null,r,u)
};var s=function(L,ab){var Z=function(ah){var ag=(f.animation?L:1)*t*B._getFormatDiff(g.vValueType,g.vMinValue,ah)/B._getFormatDiff(g.vValueType,g.vMinValue,g.vMaxValue);return ag};var D=function(ag){if(d){return i*B._getFormatDiff(g.lValueType,g.lMinValue,ag)/B._getFormatDiff(g.lValueType,g.lMinValue,g.lMaxValue)}else{if(g.multiple){return i*ag/(g.tuftCount-1)}else{return i*ag/(v.length-1)}}};var O=function(ah,ak,an,am,ai,au,at,aq,ap,ar,ao,ag){if(ab>=1){var aj={vvalue:au,lvalue:at,llabel:aq,text:ap,issmall:ah};if(typeof ar=="function"){aj.click=ar}if(typeof ao=="function"){aj.mouseover=ao}if(typeof ag=="function"){aj.mouseleave=ag}var al=new n(ak,an,am,ai,aj);B.shapes[j].nodes.push(al);B.coordinates.rangearea[j].nodes[ak]={isSmall:ah,centerX:an,centerY:am,length:ai}}};var ad,E,G,J,U;if(g.multiple){var N=[];var Y=[];var P=[];for(var X=0,ac;ac=v[X];X++){var W=ac.linewidth||f.area.linewidth||LChart.Const.Defaults.LineWidth;var aa=ac.color||k[X%k.length];var af=ac.fillcolor||e[X%e.length];var M=ac.text||"";var I=ac.value.length;var F=I/(g.lLabels.length-1);for(var T=0;T<I;T++){subitem=ac.value[T];ad=d?subitem[0]:T;E=d?subitem[1]:subitem;var K=E[0];var ae=E[1];if(K>ae){ae=K;K=E[1]}if(ad!=null&&K!=null&&ae!=null){G=(u?y.maxY-D(ad):y.minX+D(ad));J=u?y.minX+Z(K):y.maxY-Z(K);U=u?y.minX+Z(ae):y.maxY-Z(ae);N.push(u?[J,G]:[G,J]);Y.push(u?[U,G]:[G,U]);var R=d?null:g.lLabels[parseInt(T/F+0.5)];var H=X*I+T;O(true,H,u?J:G,u?G:J,ac.nodelength||a,K,ad,R,M,ac.click,ac.mouseover,ac.mouseleave);O(false,H,u?U:G,u?G:U,ac.nodelength||a,ae,ad,R,M,ac.click,ac.mouseover,ac.mouseleave)}}A(N,Y,af);var Q={pointsSmall:N,pointsBig:Y,fillcolor:af,linewidth:W,linecolor:aa,nodetype:ac.nodetype,nodelength:ac.nodelength,nodelinecolor:ac.nodelinecolor,nodelinewidth:ac.nodelinewidth,nodefillcolor:ac.nodefillcolor};P.push(Q);if(ab>=1){if(!o.areainfos){o.areainfos=[]}o.areainfos[X]=Q}N=[];Y=[]}for(var X=0;X<P.length;X++){var N=P[X].pointsSmall;b(N,P[X].linewidth,P[X].linecolor,u);for(var V=0;V<N.length;V++){var S=N[V];m(S[0],S[1],P[X].linecolor,P[X])}var Y=P[X].pointsBig;b(Y,P[X].linewidth,P[X].linecolor,u);for(var V=0;V<Y.length;V++){var S=Y[V];m(S[0],S[1],P[X].linecolor,P[X])}}}else{var W=f.area.linewidth||LChart.Const.Defaults.LineWidth;var aa=k[0];var af=e[0];var N=[];var Y=[];var I=v.length;for(var X=0;X<I;X++){subitem=v[X];var M=subitem.text||"";ad=d?subitem.value[0]:X;E=d?subitem.value[1]:subitem.value;var K=E[0];var ae=E[1];if(K>ae){ae=K;K=E[1]}if(ad!=null&&K!=null&&ae!=null){G=u?y.maxY-D(ad):y.minX+D(ad);J=u?y.minX+Z(K):y.maxY-Z(K);U=u?y.minX+Z(ae):y.maxY-Z(ae);N.push(u?[J,G,X]:[G,J,X]);Y.push(u?[U,G,X]:[G,U,X]);var R=d?null:g.lLabels[X%g.lLabels.length];O(true,X,u?J:G,u?G:J,subitem.nodelength||a,K,ad,R,M,subitem.click,subitem.mouseover,subitem.mouseleave);O(false,X,u?U:G,u?G:U,subitem.nodelength||a,ae,ad,R,M,subitem.click,subitem.mouseover,subitem.mouseleave)}}if(ab>=1){o.pointsSmall=N;o.pointsBig=Y;o.linewidth=W;o.linecolor=aa;o.fillcolor=af}A(N,Y,af);b(N,W,aa,u);for(var V=0;V<N.length;V++){var S=N[V];m(S[0],S[1],aa,v[S[2]])}b(Y,W,aa,u);for(var V=0;V<Y.length;V++){var S=Y[V];m(S[0],S[1],aa,v[S[2]])}}};var l=function(){var G=function(H,L){var K=null;for(var J=B.shapes[j].nodes.length-1;J>=0;J--){var I=B.shapes[j].nodes[J];if(Math.sqrt(Math.pow(H-I.centerX,2)+Math.pow(L-I.centerY,2))<=I.nodelength/2){K=I;break}}return K};var F=function(O,N){var I=[],K=-1,M=[];var P=(u?N:O);if(N<=y.maxY&&N>=y.minY&&O>=y.minX&&O<=y.maxX){for(var J=0,L;L=B.shapes[j].nodes[J];J++){var H=u?L.centerY:L.centerX;if(Math.abs(H-P)<q){M.push(H)}}M.sort(function(R,Q){if(Math.abs(R-P)<Math.abs(Q-P)){return -1}else{return 1}});if(M.length>0){K=M[0]}for(var J=0,L;L=B.shapes[j].nodes[J];J++){var H=u?L.centerY:L.centerX;if(Math.abs(H-K)<0.00001){I.push(L)}}}return{shapes:I,loc:K}};var E=function(J){var J=window.event||J;var H=B._getMouseLoction(J);var I=G(H.X,H.Y);if(I){I.click(J)}};var D=function(W){var W=window.event||W;var I=B._getMouseLoction(W);var S=G(I.X,I.Y);if(S){B._configs.cursorPointer=true}if(C.currentMouseShape!=S){var J=C.currentMouseShape;if(J){var L=typeof J.data.mouseleave=="function"?J.data.mouseleave:(f.mouseleave||null);if(L){L(J.data,W)}}C.currentMouseShape=S;for(var U=0,J;J=B.shapes[j].nodes[U];U++){if(J!=S&&J.isHovered){J.isHovered=false}}if(S){S.isHovered=true;if(f.alignline.verticalline||f.alignline.horizontalline){B.redrawAll()}if(f.alignline.verticalline){B.DrawFigures.createLine(S.centerX,y.minY,S.centerX,y.maxY+1,1,p)}if(f.alignline.horizontalline){B.DrawFigures.createLine(y.minX,S.centerY,y.maxX,S.centerY,1,p)}var Z=typeof S.data.mouseover=="function"?S.data.mouseover:(f.mouseover||null);if(Z){Z(S.data,W)}}else{if(f.alignline.verticalline||f.alignline.horizontalline){B.redrawAll()}}}var M=F(I.X,I.Y);if(C.loc!=M.loc){C.loc=M.loc;if(u&&f.alignline.horizontalline||!u&&f.alignline.verticalline){B.redrawAll()}if(h){for(var U=0;U<C.mergeTips.length;U++){if(C.mergeTips[U]){C.mergeTips[U].style.display="none"}}}else{for(var U=0,J;J=B.shapes[j].nodes[U];
U++){if(J.hideTip){J.hideTip()}}}if(M.shapes.length){if(!u&&f.alignline.verticalline){B.DrawFigures.createLine(M.loc,y.minY,M.loc,y.maxY+1,1,p)}if(u&&f.alignline.horizontalline){B.DrawFigures.createLine(y.minX,M.loc,y.maxX,M.loc,1,p)}if(h){if(M.shapes[0].showTip){var V=C.mergeTips[M.shapes[0].index];if(!V){var Y=[];var T=0;var X=0;var R=-1;var O=[];for(var U=0,J;J=M.shapes[U];U++){var N=J.index;if(N!=R){R=N;O[N]=J.data}else{var K={};var H=J.data.vvalue>O[N].vvalue;K.max=H?J.data:O[N];K.min=H?O[N]:J.data;Y.push(K)}X+=J.centerY;T+=J.centerX}var Q=T/M.shapes.length+5;var P=X/M.shapes.length;V=B._createTip(f.tip.content.call(f,Y,true),Q,P);B._changeTip(V,null,P-V.clientHeight/2+10);if(Q+V.clientWidth>y.maxX){B._changeTip(V,Q-5-a-V.clientWidth)}C.mergeTips[M.shapes[0].index]=V}V.style.display="inline"}}else{for(var U=0,J;J=M.shapes[U];U++){if(J.showTip){J.showTip()}}}}}};B._addEventListener("click",E);B._addEventListener("mousemove",D)};var w=function(){if(g.multiple){var D=o.areainfos;for(var G=0;G<D.length;G++){var H=D[G];A(H.pointsSmall,H.pointsBig,H.fillcolor)}for(var G=0;G<D.length;G++){var H=D[G];b(H.pointsSmall,H.linewidth,H.linecolor,u);b(H.pointsBig,H.linewidth,H.linecolor,u);for(var E=0;E<H.pointsSmall.length;E++){m(H.pointsSmall[E][0],H.pointsSmall[E][1],H.linecolor,H)}for(var E=0;E<H.pointsSmall.length;E++){m(H.pointsBig[E][0],H.pointsBig[E][1],H.linecolor,H)}}}else{var F=o.pointsSmall;var I=o.pointsBig;A(F,I,o.fillcolor);b(o.pointsSmall,o.linewidth,o.linecolor,u);b(o.pointsBig,o.linewidth,o.linecolor,u);for(var E=0;E<o.pointsSmall.length;E++){m(o.pointsSmall[E][0],o.pointsSmall[E][1],o.linecolor,v[o.pointsSmall[E][2]])}for(var E=0;E<o.pointsBig.length;E++){m(o.pointsBig[E][0],o.pointsBig[E][1],o.linecolor,v[o.pointsBig[E][2]])}}};return{drawSegments:s,mouseEvents:l,redraw:w}};