if(!window.LChart){throw new Error("未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n"+"Not loaded loongchart.core.js which must be loaded before other LChart's js.")}else{LChart.Const.Skins.BlackAndWhite.Radar={ScaleLineColor:null,StaffFontColor:null,StaffBackColor:"rgba(255,255,255,0.3)",RadarNodeLinecolors:["#ffffff"],LabelsFontColors:"#666666"}}LChart.Radar=LChart.getCore().__extends({GraphType:"Radar"});LChart.Radar._spreadSkin=function(b,a){b.scale={};b.staff={};b.radar={};b.labels={};b.scale.linecolor=a.ScaleLineColor||null;b.staff.fontcolor=a.StaffFontColor||null;b.staff.backcolor=a.StaffBackColor||null;b.radar.nodelinecolors=a.RadarNodeLinecolors||null;b.labels.fontcolors=a.LabelsFontColors||null};LChart.Radar._getDefaultOptions=function(b){var a=LChart.Methods.Extend(b,{offX:0,offY:0,radius:null,margin:null,startDirection:null,scale:{linewidth:0.5,minvalue:null,maxvalue:null,interval:null},staff:{show:true,content:function(c){return c.toString()},fontcolor:null,fontfamily:null,fontsize:null,fontweight:null,backcolor:"rgba(255,255,255,0.3)"},radar:{fillcolors:null,linecolors:null,nodefillcolors:null,nodelinecolors:["#ffffff"],linewidth:null,nodetype:null,nodelinewidth:1,nodelength:null},labels:{labels:null,fontcolors:null,fontweight:null,fontsize:null,fontfamily:null,showtips:true},tip:{content:function(c){var d=c.value.toString();return"<div>"+(c.text?c.text+"<br/>":"&nbsp;")+c.label+"："+d+"&nbsp;</div>"}}});return a};LChart.Radar._getCheckOptions=function(){return{__top:[["offX","n"],["offY","n"],["radius","n"],["margin","n"],["startDirection","s"]],scale:[["minvalue","n"],["maxvalue","n"],["interval","n"]],staff:[["show","b"],["content","f"],["fontcolor","c"],["fontfamily","s"],["fontsize","n"],["fontweight","s"],["backcolor","c"]],radar:[["fillcolors","ca"],["linecolors","ca"],["nodefillcolors","ca"],["nodelinecolors","ca"],["linewidth","n"],["nodetype","s"],["nodelinewidth","n"],["nodelength","n"]],labels:[["labels","sa"],["fontcolors","ca"],["fontweight","s"],["fontsize","n"],["fontfamily","s"],["showtips","b"]]}};LChart.Radar._drawgraphic=function(A,l,u,f){var m=A._computeSegmentTotal(u);var z=m.multiple;var h=A._getComputed(0,"n",f.scale,m.minval,m.maxval,8);var y=A._computeRadiusForPies(f);var d=(f.radar.fillcolors&&f.radar.fillcolors.length>0?f.radar.fillcolors:null)||LChart.Const.Defaults.TransparentColors;var o=(f.radar.linecolors&&f.radar.linecolors.length>0?f.radar.linecolors:null)||LChart.Const.Defaults.FillColors;var g=(f.radar.nodefillcolors&&f.radar.nodefillcolors.length>0?f.radar.nodefillcolors:null)||o;var b=(f.radar.nodelinecolors&&f.radar.nodelinecolors.length>0?f.radar.nodelinecolors:null)||g;var n=f.labels.fontcolors&&f.labels.fontcolors.length>0?f.labels.fontcolors:null;if(l==A.ID){if(!z){A._configs.legendInvalid=true}A._configs.legendColors=d;A.coordinates.draw=y.coordinate}var x=!f.radius||!LChart.Methods.IsNumber(f.radius)?y.maxRadius:f.radius;var B=A._configs.specificConfig[l];if(!A.coordinates.radar){A.coordinates.radar={}}A.coordinates.radar[l]={radius:x,centerX:y.centerX,centerY:y.centerY,nodes:[],labels:[],staff:[]};A.shapes[l]={nodes:[],labels:[]};var r=A.shapes[l];var a=f.radar.nodelength||LChart.Methods.CapValue((y.coordinate.maxX-y.coordinate.minX)/150,10,6);var j=f.startDirection||"n";var t=j=="e"?0:(j=="s"?Math.PI/2:(j=="w"?Math.PI:-Math.PI/2));var k=z?u[0].value.length:u.length;var c=Math.PI*2/k;var e=function(C){return(C-h.minvalue)/(h.maxvalue-h.minvalue)};var q=function(C,G,F,D,E){this.index=C;this.centerX=G;this.centerY=F;this.isHovered=false;this.nodelength=D;this.data=E;this.click=function(I){var H=typeof this.data.click=="function"?this.data.click:(f.click||null);if(H){H(this.data,I)}};if(f.tip.show&&typeof f.tip.content=="function"){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display="inline"}else{var J=this.centerX+a+5;var I=this.centerY-a-10;this.tip=A._createTip(f.tip.content.call(f,this.data,false),J,I);if(this.centerX+this.tip.clientWidth>y.coordinate.maxX){A._changeTip(this.tip,J-5-a-this.tip.clientWidth)}var H=this;H.tip.onclick=function(K){H.click(K)}}};this.hideTip=function(){if(this.tip){this.tip.style.display="none"}}}};var w=function(Z,O,X,H){var D=f.radar;var Y=(z?X.color:null)||d[H%d.length];var V=(z?X.linecolor:null)||o[H%o.length];var T=(z?X.linewidth:null)||D.linewidth||1;var S=[];for(var U=0;U<(z?X.value.length:X.length);U++){var P=z?X:X[U];var Q=z?X.value[U]:P.value;var E=P.nodefillcolor||g[H%g.length];var N=P.nodelinecolor||b[H%b.length];var M=P.nodelinewidth||D.nodelinewidth||0;var I=P.nodelength||a;var aa=P.nodetype||D.nodetype||"c";var F=Z*x*e(Q);var L=t+U*c;var K=y.centerX+F*Math.cos(L);var J=y.centerY+F*Math.sin(L);S.push([K,J,E,N,M,I,aa]);if(O){var W={value:Q,click:P.click,mouseover:P.mouseover,mouseleave:P.mouseleave};W.text=z?X.text:"";W.label=z?(f.labels.labels?f.labels.labels[U%f.labels.labels.length]:""):P.text;var C=new q(z?H*X.value.length+U:U,K,J,I,W);r.nodes.push(C)}}A.DrawFigures.createCloseFigure(S,Y,T,V);
for(var U=0,R;R=S[U];U++){A.DrawFigures.createPointElement(R[6],R[0],R[1],R[5],R[2],true,R[3],R[4],true,true);if(O){var G={centerX:R[0],centerY:R[1],length:R[5]};if(z){if(!A.coordinates.radar[l].nodes[H]){A.coordinates.radar[l].nodes[H]=[]}A.coordinates.radar[l].nodes[H][U]=G}else{A.coordinates.radar[l].nodes[U]=G}}}};var i=function(N){var af=f.scale;var ab=af.linewidth;if(!(af.linewidth>0)){return}var D=f.labels;var M=D.labels||[];if(!z){for(var al=0,Y;Y=u[al];al++){M[al]=Y.text||" "}}var K=D.fontsize||x/8;var I=af.linecolor||f.lineColor||"rgb(190,190,190)";var ak=0.1;var E=5;for(var aj=0;aj<k;aj++){var ae=t+aj*c;var P=ae+c;var S=0;var R=0;for(var V=h.minvalue+h.interval;V<=h.maxvalue;V+=h.interval){var ag=x*e(V);S=y.centerX+ag*Math.cos(ae);R=y.centerY+ag*Math.sin(ae);var H=y.centerX+ag*Math.cos(P);var F=y.centerY+ag*Math.sin(P);A.DrawFigures.createLine(S,R,H,F,ab,I)}A.DrawFigures.createLine(y.centerX,y.centerY,S,R,ab,I);var Z=LChart.Methods.JudgeBetweenAngle(-Math.PI*0.5,Math.PI*0.5,ae);var U=LChart.Methods.JudgeBetweenAngle(-Math.PI,0,ae);var ac=LChart.Methods.JudgeBetweenAngle(-Math.PI/2-ak,-Math.PI/2+ak,ae)||LChart.Methods.JudgeBetweenAngle(Math.PI/2-ak,Math.PI/2+ak,ae);var am=LChart.Methods.JudgeBetweenAngle(Math.PI-ak,Math.PI+ak,ae)||LChart.Methods.JudgeBetweenAngle(-ak,ak,ae);var X=S;var W=R;if(!ac){if(Z){X+=E+E*Math.abs(Math.sin(ae))}else{X-=E+E*Math.abs(Math.sin(ae))}if(am){W+=K/3}else{if(U){W-=E*Math.abs(Math.cos(ae))}else{W+=K/2+E*Math.abs(Math.cos(ae))}}}else{if(U){W-=K*0.7}else{W+=K}}var ai=(n?n[aj%n.length]:null)||I;var ad=A.DrawFigures.createText(M[aj],X,W,ac?"center":(Z?"left":"right"),D.fontweight,K,D.fontfamily,ai);if(N){var ah={index:aj,centerX:(ac?X:(Z?X+ad/2:X-ad/2)),centerY:W-K/2,size:K,length:ad};r.labels.push(ah);A.coordinates.radar[l].labels.push({index:aj,text:M[aj],left:ah.centerX-ad/2,right:ah.centerX+ad/2,top:W-K,bottom:W,size:K,length:ad})}}var aa=f.staff;var L=aa.content;if(!aa.show||typeof L!="function"){return}var T=aa.fontsize||x/h.scalecount*0.8;var O=aa.backcolor;var J=0;if(O){for(var V=h.minvalue+h.interval;V<=h.maxvalue;V+=h.interval){var C=A.DrawFigures.measureText(L(V),aa.fontweight,T,aa.fontfamily);J=Math.max(J,C)}}var G=function(ar,aq,at){var ap=(aq=="n"||aq=="s")?y.centerX:(aq=="w"?y.centerX-at:y.centerX+at);var an=(aq=="w"||aq=="e")?y.centerY+T/2.5:(aq=="n"?y.centerY-at+T/2.5:y.centerY+at+T/2.5);if(O){A.DrawFigures.createRectangleFill(ap-J/2-1,an-T+1,J+2,T+2,O)}var ao=A.DrawFigures.createText(ar,ap,an,"center",aa.fontweight,T,aa.fontfamily,ai);if(N){A.coordinates.radar[l].staff.push({text:ar,left:ap-ao/2,right:ap+ao/2,top:an-T,bottom:an,size:K,length:ao})}};for(var V=h.minvalue+h.interval;V<=h.maxvalue;V+=h.interval){var ai=aa.fontcolor||"#000000";var Q=x*e(V);G(L(V),j,Q)}};var v=function(){s(1,0)};var s=function(G,F){var C=F>=1;if(!f.scaleOverlay){i(C)}if(z){for(var D=0,E;E=u[D];D++){w(G,C,E,D)}}else{w(G,C,u,0)}if(f.scaleOverlay){i(C)}};var p=function(){var E=function(G,K){var J=null;for(var I=r.nodes.length-1;I>=0;I--){var H=r.nodes[I];if(Math.sqrt(Math.pow(G-H.centerX,2)+Math.pow(K-H.centerY,2))<=H.nodelength/2){J=H;break}}return J};var F=function(G,K){var J=null;for(var I=r.labels.length-1;I>=0;I--){var H=r.labels[I];if(Math.abs(G-H.centerX)<H.length/2&&Math.abs(K-H.centerY)<H.size/2){J=H;break}}return J};var D=function(I){var I=window.event||I;var G=A._getMouseLoction(I);var H=E(G.X,G.Y);if(H){H.click(I)}};var C=function(N){var N=window.event||N;var I=A._getMouseLoction(N);var M=E(I.X,I.Y)||F(I.X,I.Y);if(M&&(M.data||f.labels.showtips)){A._configs.cursorPointer=true}if(B.currentMouseShape!=M){var J=B.currentMouseShape;if(J&&J.data){var G=typeof J.data.mouseleave=="function"?J.data.mouseleave:(f.mouseleave||null);if(G){G(J.data,N)}}B.currentMouseShape=M;for(var L=0,J;J=r.nodes[L];L++){if(J!=M&&J.isHovered){J.isHovered=false;if(J.hideTip){J.hideTip()}}}if(M){if(M.data){M.isHovered=true;if(M.showTip){M.showTip()}var H=typeof M.data.mouseover=="function"?M.data.mouseover:(f.mouseover||null);if(H){H(M.data,N)}}else{if(f.labels.showtips){var K=M.index;for(var L=r.nodes.length-1;L>=0;L--){var J=r.nodes[L];if(J.index%k==K&&J.showTip){J.isHovered=true;J.showTip()}}}}}}};A._addEventListener("click",D);A._addEventListener("mousemove",C)};return{drawSegments:s,mouseEvents:p,redraw:v}};