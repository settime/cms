if(!window.LChart){throw new Error("未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n"+"Not loaded loongchart.core.js which must be loaded before other LChart's js.")}else{LChart.Const.Skins.BlackAndWhite.Line={NodeLineColor:"#ffffff",AlignlineLineColor:null}}LChart.Line=LChart.getCore().__extends({GraphType:"Line"});LChart.Line._spreadSkin=function(b,a){b.node={};b.alignline={};b.node.linecolor=a.NodeLineColor||null;b.alignline.linecolor=a.AlignlineLineColor||null};LChart.Line._getDefaultOptions=function(b){var a=LChart.Methods.Extend(b,{invertAxis:false,line:{colors:null,linewidth:null,smoothline:false},labelAxis:{valueType:null,content:function(c){if(this.valueType=="d"){return c.format("yyyy-MM-dd")}else{if(this.valueType=="t"){return c.format("MM-dd hh:mm")}else{if(this.valueType=="m"){return c.format("hh:mm:ss.S")}else{return c.toString()}}}},minvalue:null,maxvalue:null,interval:null,sort:true},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:false,spotdistance:10,content:function(e,g){if(g){var d="<div>";for(var c=0;c<e.length;c++){var f=this.valueType=="p"?e[c].vpercent.toFixed(2)+"%":e[c].vvalue.toString();d+=(c>0?"<br/>":"")+e[c].text+" : "+f}d+="&nbsp;</div>";return d}else{var f=this.valueType=="p"?e.vpercent.toFixed(2)+"%":e.vvalue.toString();if(this.valueType=="d"){f=e.vvalue.format("yyyy-MM-dd")}else{if(this.valueType=="t"){f=e.vvalue.format("MM-dd hh:mm")}else{if(this.valueType=="m"){f=e.vvalue.format("hh:mm:ss.S")}}}return"<div>&nbsp;"+(e.text?e.text+"：":"")+f+"&nbsp;</div>"}}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return a};LChart.Line._getCheckOptions=function(){return{__top:[["invertAxis","b"]],line:[["colors","ca"],["linewidth","n"],["smoothline","b"]],labelAxis:[["valueType","s"],["content","f"],["interval","n"],["sort","b"]],node:[["show","b"],["nodetype","s"],["linecolor","c"],["linewidth","n"],["length","n"],["fillcolor","c"]],tip:[["merge","b"],["spotdistance","n"]],alignline:[["verticalline","b"],["horizontalline","b"],["linecolor","c"]],scale:[["drawvertical","b"]]}};LChart.Line._drawgraphic=function(z,j,u,f){z._configs.recreateAssists=true;var t=f.invertAxis;var y=j==z.ID;if(y){z._configs.invertAxis=t;if(f.labelAxis.valueType=="p"){throw new Error(z._messages.WrongParam+z._messages.LabelAxisValueTypeCannotBePercent)}}var g=z._formatAxisData();if(g.tuftCount<2){throw new Error(z._messages.WrongData+z._messages.NeedLeastTwoPoints)}var d=z._calculateOutersValid();var x=z._computeAxis(d);var w=z._getDrawableCoordinate();if(!z.coordinates.nodes){z.coordinates.nodes={}}z.coordinates.nodes[j]={nodes:[]};z.shapes[j]={nodes:[]};var e=f.labelAxis.valueType;var b=g.vValueType=="p";var q=LChart.Methods.IsNumber(f.tip.spotdistance)&&f.tip.spotdistance>0?f.tip.spotdistance:10;var o=f.alignline.linecolor||LChart.Const.Defaults.AlignLineColor;var k=(f.line.colors&&f.line.colors.length>0?f.line.colors:null)||LChart.Const.Defaults.FillColors;if(y){z.coordinates.draw=w;z._configs.legendColors=k}var p={};var A=z._configs.specificConfig[j];var h=z._configs.pointsPosition;A.mergeTips=[];var s=(t?x.maxX-x.minX:x.maxY-x.minY);var i=(t?x.maxY-x.minY:x.maxX-x.minX);var a=f.node.length||LChart.Methods.CapValue(i/100,10,6);var c=f.line.smoothline?z.DrawFigures.createSmoothLine:z.DrawFigures.createPointsLine;var n=function(B,F,E,C,D){this.index=B;this.centerX=F;this.centerY=E;this.isHovered=false;this.data=D;this.nodelength=C;this.click=function(H){var G=typeof this.data.click=="function"?this.data.click:(f.click||null);if(G){G(this.data,H)}};if(f.tip.show&&typeof f.tip.content=="function"){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display="inline"}else{var I=this.centerX+a+5;var H=this.centerY-a-10;this.tip=z._createTip(f.tip.content.call(f,this.data,false),I,H);if(this.centerX+this.tip.clientWidth>x.maxX){z._changeTip(this.tip,I-5-a-this.tip.clientWidth)}var G=this;G.tip.onclick=function(J){G.click(J)}}};this.hideTip=function(){if(this.tip){this.tip.style.display="none"}}}};var m=function(I,H,K,G){var D=f.node;if(D.show){var F=G.nodelength||a;var C=G.nodetype||D.nodetype||"c";var B=G.nodelinecolor||D.linecolor||K;var J=G.nodelinewidth||D.linewidth;var E=G.nodefillcolor||D.fillcolor||K;z.DrawFigures.createPointElement(C,I,H,F,E,true,B,J,true,true)}};var r=function(H,U){var S=function(Z){var Y=(f.animation?H:1)*s*z._getFormatDiff(g.vValueType,g.vMinValue,Z)/z._getFormatDiff(g.vValueType,g.vMinValue,g.vMaxValue);return Y};var B=function(Y){if(e){return i*z._getFormatDiff(g.lValueType,g.lMinValue,Y)/z._getFormatDiff(g.lValueType,g.lMinValue,g.lMaxValue)}else{if(g.multiple){return i*Y/(g.tuftCount-1)}else{if(y){return i*Y/(u.length-1)}else{return x.labelDistance*Y}}}};var J=function(ab,ad,ag,af,Z,al,ak,ai,ac,aj,ah,Y){if(U>=1){var aa={vvalue:al,lvalue:ak,text:ai};if(ac!=null){aa.vpercent=ac}if(typeof aj=="function"){aa.click=aj}if(typeof ah=="function"){aa.mouseover=ah}if(typeof Y=="function"){aa.mouseleave=Y
}var ae=new n(ad,ag,af,Z,aa);z.shapes[j].nodes.push(ae);if(ab>=0){z.coordinates.nodes[j].nodes[ab][ad]={centerX:ag,centerY:af,length:Z}}else{z.coordinates.nodes[j].nodes[ad]={centerX:ag,centerY:af,length:Z}}}};var W,C,X,E,D,G;if(g.multiple){var K=[];for(var R=0,V;V=u[R];R++){var P=[];var Q=V.linewidth||f.line.linewidth||LChart.Const.Defaults.LineWidth;var T=V.color||k[R%k.length];var I=V.text||"";if(U>=1){z.coordinates.nodes[j].nodes[R]=[]}var F=V.value.length;for(var N=0;N<F;N++){subitem=V.value[N];W=e?subitem[0]:N;C=e?subitem[1]:subitem;X=b?V.percent[N]:null;G=b?X:C;if(G!=null&&W!=null){D=t?x.minX+S(G):x.maxY-S(G);if(h){E=h[R]+(t?-h.labelDistance*N:h.labelDistance*N)}else{E=(t?x.maxY-B(W):x.minX+B(W))}P.push(t?[D,E]:[E,D]);J(R,N,t?D:E,t?E:D,V.nodelength||a,C,W,I,X,V.click,V.mouseover,V.mouseleave)}}var L={points:P,linewidth:Q,linecolor:T,nodetype:V.nodetype,nodelength:V.nodelength,nodelinecolor:V.nodelinecolor,nodelinewidth:V.nodelinewidth,nodefillcolor:V.nodefillcolor};K.push(L);if(U>=1){if(!p.nodeinfos){p.nodeinfos=[]}p.nodeinfos[R]=L}}for(var R=0;R<K.length;R++){var P=K[R].points;c(P,K[R].linewidth,K[R].linecolor,t);for(var O=0;O<P.length;O++){var M=P[O];m(M[0],M[1],K[R].linecolor,K[R])}}}else{var Q=f.line.linewidth||LChart.Const.Defaults.LineWidth;var T=k[0];var P=[];var F=u.length;for(var R=0;R<F;R++){subitem=u[R];var I=subitem.text||"";W=e?subitem.value[0]:R;C=e?subitem.value[1]:subitem.value;X=b?u[R].percent:null;G=b?X:C;if(G!=null&&W!=null){E=y?(t?x.maxY-B(W):x.minX+B(W)):x.startPos+(t?-B(W):B(W));D=t?x.minX+S(G):x.maxY-S(G);P.push(t?[D,E,R]:[E,D,R]);J(-1,R,t?D:E,t?E:D,subitem.nodelength||a,C,W,I,X,subitem.click,subitem.mouseover,subitem.mouseleave)}}if(U>=1){p.points=P;p.linewidth=Q;p.linecolor=T}c(P,Q,T,t);for(var O=0;O<P.length;O++){var M=P[O];m(M[0],M[1],T,u[M[2]])}}};var l=function(){var E=function(F,J){var I=null;for(var H=z.shapes[j].nodes.length-1;H>=0;H--){var G=z.shapes[j].nodes[H];if(Math.sqrt(Math.pow(F-G.centerX,2)+Math.pow(J-G.centerY,2))<=G.nodelength/2){I=G;break}}return I};var D=function(R,P){var I=[];var L=0;if(P<=x.maxY&&P>=x.minY&&R>=x.minX&&R<=x.maxX){var M=-1;var Q=i/(g.tuftCount-1);var F=(t?x.maxY:x.minX);var S=(t?P:R);for(var J=1;J<g.tuftCount;J++){var H=F+(t?-J*Q:(J-1)*Q);var G=F+(t?-(J-1)*Q:J*Q);if(H<=S&&G>=S){var O=Math.abs(H-S);var K=Math.abs(G-S);if(O<q&&O<=K){M=t?J:J-1;L=H}else{if(K<q&&K<=O){M=t?J-1:J;L=G}}break}}for(var J=0,N;N=z.shapes[j].nodes[J];J++){if(N.index==M){I.push(N)}}}return{shapes:I,loc:L}};var C=function(H){var H=window.event||H;var F=z._getMouseLoction(H);var G=E(F.X,F.Y);if(G){G.click(H)}};var B=function(O){var O=window.event||O;var R=z._getMouseLoction(O);var H=h||g.lValueType||!g.multiple;var I=E(R.X,R.Y);if(I){z._configs.cursorPointer=true}if(A.currentMouseShape!=I){var P=A.currentMouseShape;if(P){var F=typeof P.data.mouseleave=="function"?P.data.mouseleave:(f.mouseleave||null);if(F){F(P.data,O)}}A.currentMouseShape=I;for(var N=0,P;P=z.shapes[j].nodes[N];N++){if(P!=I&&P.isHovered){P.isHovered=false;if(H&&P.hideTip){P.hideTip()}}}if(I){I.isHovered=true;if(f.alignline.verticalline||f.alignline.horizontalline){z.redrawAll()}if(f.alignline.verticalline){z.DrawFigures.createLine(I.centerX,x.minY,I.centerX,x.maxY+1,1,o)}if(f.alignline.horizontalline){z.DrawFigures.createLine(x.minX,I.centerY,x.maxX,I.centerY,1,o)}if(I.showTip&&H){I.showTip()}var S=typeof I.data.mouseover=="function"?I.data.mouseover:(f.mouseover||null);if(S){S(I.data,O)}}else{if(H&&(f.alignline.verticalline||f.alignline.horizontalline)){z.redrawAll()}}}if(!H){var K=D(R.X,R.Y);if(z.loc!=K.loc){z.loc=K.loc;if(f.tip.merge){for(var N=0;N<A.mergeTips.length;N++){if(A.mergeTips[N]){A.mergeTips[N].style.display="none"}}}else{for(var N=0,P;P=z.shapes[j].nodes[N];N++){if(P.hideTip){P.hideTip()}}}if(t&&f.alignline.horizontalline||!t&&f.alignline.verticalline){z.redrawAll()}if(K.shapes.length){if(!t&&f.alignline.verticalline){z.DrawFigures.createLine(K.loc,x.minY,K.loc,x.maxY+1,1,o)}if(t&&f.alignline.horizontalline){z.DrawFigures.createLine(x.minX,K.loc,x.maxX,K.loc,1,o)}if(f.tip.merge){if(K.shapes[0].showTip){var Q=A.mergeTips[K.shapes[0].index];if(!Q){var M=[];var G=0;var T=0;for(var N=0,P;P=K.shapes[N];N++){M.push(P.data);T+=P.centerY;G+=P.centerX}var L=G/K.shapes.length+5;var J=T/K.shapes.length;Q=z._createTip(f.tip.content.call(f,M,true),L,J);z._changeTip(Q,null,J-Q.clientHeight/2+10);if(L+Q.clientWidth>x.maxX){z._changeTip(Q,L-5-a-Q.clientWidth)}A.mergeTips[K.shapes[0].index]=Q}Q.style.display="inline"}}else{for(var N=0,P;P=K.shapes[N];N++){if(P.showTip){P.showTip()}}}}}}};z._addEventListener("click",C);z._addEventListener("mousemove",B)};var v=function(){if(g.multiple){for(var C=0;C<p.nodeinfos.length;C++){var D=p.nodeinfos[C].points;c(D,p.nodeinfos[C].linewidth,p.nodeinfos[C].linecolor,t);for(var B=0;B<D.length;B++){m(D[B][0],D[B][1],p.nodeinfos[C].linecolor,p.nodeinfos[C])}}}else{var D=p.points;c(D,p.linewidth,p.linecolor,t);for(var B=0;B<D.length;B++){m(D[B][0],D[B][1],p.linecolor,u[D[B][2]])
}}};return{drawSegments:r,mouseEvents:l,redraw:v}};