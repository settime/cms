window.dcharttools=window.lcharttools={};lcharttools.canvasConfigs={defaultLineColor:"#CCCCCC",defaultLineWidth:1,defaultFontFamily:"微软雅黑",defaultFontSize:14,defaultFontColor:"#000000"};lcharttools.funcs={};lcharttools.funcs._getMouseLoction=function(f){if(f.offsetX!=null){return{X:f.offsetX,Y:f.offsetY}}else{var b=function(e){var g={x:0,y:0};while(e){g.x+=e.offsetLeft;g.y+=e.offsetTop;e=e.offsetParent}return g};var d=f.target;if(d.offsetLeft==undefined){d=d.parentNode}var c=b(d);var a={x:window.pageXOffset+f.clientX,y:window.pageYOffset+f.clientY};return{X:a.x-c.x,Y:a.y-c.y}}};lcharttools.funcs._judgeNormalObject=function(a){return a&&typeof a=="object"&&!(Object.prototype.toString.call(a)==="[object Array]")&&!(typeof a=="object"&&a.constructor==Date)};lcharttools.funcs._deepCopy=function(c){var a={};var b=function(d,g,f){backupPath=f;for(var e in g){f+=e+".";if(lcharttools.funcs._judgeNormalObject(g[e])){d[e]={};b(d[e],g[e],f)}else{if(g.hasOwnProperty(e)){d[e]=g[e]}}f=backupPath}};b(a,c,"");return a};lcharttools.funcs._override=function(d,e,c){var a=lcharttools.funcs._deepCopy(d);var b=function(f,j,i){var g=i;for(var h in j){i+=h+".";if(f[h]!==undefined&&j.hasOwnProperty(h)){if(lcharttools.funcs._judgeNormalObject(j[h])&&lcharttools.funcs._judgeNormalObject(f[h])){b(f[h],j[h],i)}else{if(!c||j[h]!=null){f[h]=j[h]}}}i=g}};b(a,e,"");return a};lcharttools.funcs._formatLinePosition=function(b,a,d){var b=Math.ceil(b);var c=function(f){var e=Math.floor(f);if(b%2==0){return f-e>0.5?e+1:e}else{return e+0.5}};if(arguments.length==3){return{x:c(a),y:c(d)}}else{return c(a)}};lcharttools.funcs._curveSmoothPoints=function(b,d,c,a){var f=(d[0]+c[0])/2;var e=(d[1]+c[1])/2;if(a){b.quadraticCurveTo(d[0],0.5*e+0.5*d[1],f,e);b.quadraticCurveTo(c[0],0.5*e+0.5*c[1],c[0],c[1])}else{b.quadraticCurveTo(0.5*f+0.5*d[0],d[1],f,e);b.quadraticCurveTo(0.5*f+0.5*c[0],c[1],c[0],c[1])}};lcharttools.funcs._setShadow=function(a,b){if(b){if(b.color){a.shadowColor=b.color}if(b.blur){a.shadowBlur=b.blur}if(b.offsetX){a.shadowOffsetX=b.offsetX}if(b.offsetY){a.shadowOffsetY=b.offsetY}}};lcharttools.createArc=function(k,d,b,f,g,j,c,e,i,h,a){if(arguments.length<4){return}e=e||0;i=i||Math.PI*2;k.save();k.beginPath();k.arc(d,b,f,e,i);if(a&&Math.abs(i-e)<Math.PI*2-0.0001){k.lineTo(d,b)}k.closePath();lcharttools.funcs._setShadow(k,h);if(g>0){k.strokeStyle=j||lcharttools.canvasConfigs.defaultLineColor;k.lineWidth=g;k.stroke()}if(c){k.fillStyle=c;k.fill()}k.restore()};lcharttools.createRing=function(j,c,a,f,d,b,e,h,g,i){j.save();j.beginPath();j.moveTo(c+d*Math.cos(e),a+d*Math.sin(e));j.arc(c,a,d,e,h);j.lineTo(c+f*Math.cos(h),a+f*Math.sin(h));j.arc(c,a,f,h,e,true);j.closePath();if(b){j.fillStyle=b;j.fill()}if(g>0){j.lineWidth=g;j.strokeStyle=i||lcharttools.canvasConfigs.defaultLineColor;j.stroke()}j.restore()};lcharttools.measureText=function(b,d,c,f,a){b.save();b.font=(c||"normal")+" "+(f||lcharttools.canvasConfigs.defaultFontSize)+"px "+(a||lcharttools.canvasConfigs.defaultFontFamily);var e=b.measureText(d).width;b.restore();return e};lcharttools.createText=function(k,d,j,h,a,i,g,c,b,f){k.save();k.textAlign=a||"left";k.font=(i||"normal")+" "+(g||lcharttools.canvasConfigs.defaultFontSize)+"px "+(c||lcharttools.canvasConfigs.defaultFontFamily);var e=k.measureText(d).width;k.fillStyle=b||lcharttools.canvasConfigs.defaultFontColor;if(f){k.translate(j,h);k.rotate(f);k.fillText(d,0,0)}else{k.fillText(d,j,h)}k.restore();return e};lcharttools.createRect=function(i,b,f,a,h,d,c,e,g){if(a<=0||h<=0){return}i.save();lcharttools.funcs._setShadow(i,g);i.beginPath();i.rect(b,f,a,h);i.closePath();if(d){i.fillStyle=d;i.fill()}if(c>0){i.lineWidth=c;i.strokeStyle=e||lcharttools.canvasConfigs.defaultLineColor;i.stroke()}i.restore()};lcharttools.createLine=function(c,b,a,g,f,e,d){var e=Math.ceil(e);if(b==g){b=g=lcharttools.funcs._formatLinePosition(e,b)}else{if(a==f){a=f=lcharttools.funcs._formatLinePosition(e,a)}}c.save();c.beginPath();c.moveTo(b,a);c.lineTo(g,f);c.lineWidth=e||lcharttools.canvasConfigs.defaultLineWidth;c.strokeStyle=d||lcharttools.canvasConfigs.defaultLineColor;c.stroke();c.restore()};lcharttools.createPointsLine=function(d,h,g,e,b,c){var a=h.length;if(a<3){return}d.save();d.lineWidth=g||lcharttools.canvasConfigs.defaultLineWidth;d.strokeStyle=e||lcharttools.canvasConfigs.defaultLineColor;d.beginPath();d.moveTo(h[0][0],h[0][1]);for(var f=0;f<a-1;f++){if(!b){d.lineTo(h[f+1][0],h[f+1][1])}else{lcharttools.funcs._curveSmoothPoints(d,h[f],h[f+1],c)}}d.stroke();d.restore()};lcharttools.createCloseFigure=function(k,h,b,e,j,a,f,g){k.save();k.beginPath();var d=h.length;lcharttools.funcs._setShadow(k,g);k.moveTo(h[0][0],h[0][1]);for(var c=0;c<d-1;c++){if(!a){k.lineTo(h[c+1][0],h[c+1][1])}else{lcharttools.funcs._curveSmoothPoints(k,h[c],h[c+1],f)}}k.closePath();if(b){k.fillStyle=b;k.fill()}if(e>0){k.lineWidth=e;k.strokeStyle=j||lcharttools.canvasConfigs.defaultLineColor;k.stroke()}k.restore()};