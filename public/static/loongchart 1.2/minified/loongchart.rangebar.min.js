if(!window.LChart){throw new Error("未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n"+"Not loaded loongchart.core.js which must be loaded before other LChart's js.")}else{LChart.Const.Skins.BlackAndWhite.RangeBar={SmallLabelColor:null,BigLabelColor:null}}LChart.RangeBar=LChart.getCore().__extends({GraphType:"RangeBar"});LChart.RangeBar._spreadSkin=function(b,a){b.smallLabel={};b.smallLabel.color=a.SmallLabelColor||null;b.bigLabel={};b.bigLabel.color=a.BigLabelColor||null};LChart.RangeBar._getDefaultOptions=function(b){var a=LChart.Methods.Extend(b,{animateY:true,animateX:true,bar:{colors:null,length:null,gap:null,useSameColor:true},tip:{content:function(c){var d=null;if(this.valueType=="d"){d="<br/>Small Value: "+c.value[0].format("yyyy-MM-dd")+"<br/>Big Value: "+c.value[1].format("yyyy-MM-dd")}else{if(this.valueType=="t"){d="<br/>Small Value: "+c.value[0].format("MM-dd hh:mm")+"<br/>Big Value: "+c.value[1].format("MM-dd hh:mm")}else{if(this.valueType=="m"){d="<br/>Small Value: "+c.value[0].format("hh:mm:ss.S")+"<br/>Big Value: "+c.value[1].format("hh:mm:ss.S")}else{d="<br/>Small Value: "+c.value[0]+"<br/>Big Value: "+c.value[1]}}}return"<div>"+c.text+"："+d+"&nbsp;</div>"}},smallLabel:{show:true,content:function(c){if(this.valueType=="d"){return c.format("yyyy-MM-dd")}else{if(this.valueType=="t"){return c.format("MM-dd hh:mm")}else{if(this.valueType=="m"){return c.format("hh:mm:ss.S")}else{return c.toString()}}}},color:null,fontweight:null,fontsize:null,fontfamily:null},bigLabel:{show:true,content:function(c){if(this.valueType=="d"){return c.format("yyyy-MM-dd")}else{if(this.valueType=="t"){return c.format("MM-dd hh:mm")}else{if(this.valueType=="m"){return c.format("hh:mm:ss.S")}else{return c.toString()}}}},color:null,fontweight:null,fontsize:null,fontfamily:null}});return a};LChart.RangeBar._getCheckOptions=function(){return{__top:[["animateY","b"],["animateX","b"]],bar:[["colors","ca"],["length","n"],["gap","n"],["useSameColor","b"]],smallLabel:[["show","b"],["content","f"],["color","c"],["fontweight","s"],["fontsize","n"],["fontfamily","s"]],bigLabel:[["show","b"],["content","f"],["color","c"],["fontweight","s"],["fontsize","n"],["fontfamily","s"]]}};LChart.RangeBar._drawgraphic=function(r,h,m,d){if(d.valueType=="p"){throw new Error(r._messages.WrongParam+r._messages.ValueTypeMustNotBePercent)}if(h==r.ID){r._configs.invertAxis=true;r._configs.valueAxiaDataIsRange=true}var f=r._formatAxisData();var a=r._calculateOutersValid();var q=r._computeAxis(a);var p=r._getDrawableCoordinate();r.shapes[h]={bars:[]};if(!r.coordinates.bars){r.coordinates.bars={}}r.coordinates.bars[h]=[];var u=r._configs.specificConfig[h];var b=d.shadow.show&&d.shadow.blur>0;var g=d.shadow.show?d.shadow:null;var e=d.bar.length;var k=d.bar.gap;if(f.multiple){if(k&&k>0){var t=(q.labelDistance-f.demanCount*2)/(f.demanCount+1);k=Math.min(k,t)}else{k=q.labelDistance/20}}else{k=0}if(e&&e>0){var c=f.multiple?((q.labelDistance-(f.demanCount+1)*k)/f.demanCount):q.labelDistance*0.8;e=Math.min(e,c)}else{e=(q.labelDistance-(f.demanCount+1)*k)/(f.multiple?(f.demanCount+0.5):1.5)}var i=(d.bar.colors&&d.bar.colors.length>0?d.bar.colors:null)||LChart.Const.Defaults.FillColors;if(h==r.ID){r.coordinates.draw=p;r._configs.legendColors=i}var o=function(x,C,E,D,H,M,F){r.DrawFigures.createRectangleFill(x,C,E,D,H,F||g);if(M){var I=M.value[0];var z=M.value[1];if(I>z){I=M.value[1];z=M.value[0]}var w=d.smallLabel;if(w.show){var y=typeof w.content=="function"?w.content.call(d,I):"";if(y){var L=M.smallfontsize||w.fontsize||LChart.Methods.CapValue(D,18,11);var v=M.smallfontweight||w.fontweight;var K=M.smallfontcolor||w.color;var A=x-L/2;var G=C+D/2+L/3;r.DrawFigures.createText(y,A,G,"right",v,L,w.fontfamily,K)}}w=d.bigLabel;if(w.show){var B=typeof w.content=="function"?w.content.call(d,z):"";if(B){var L=M.bigfontsize||w.fontsize||LChart.Methods.CapValue(D,18,11);var v=M.bigfontweight||w.fontweight;var K=M.bigfontcolor||w.color;var J=x+E+L/2;var G=C+D/2+L/3;r.DrawFigures.createText(B,J,G,"left",v,L,w.fontfamily,K)}}}};var s=function(y,x,C,B,z,v,w,A){this.indexX=y;this.indexY=x;this.left=C;this.top=B;this.width=z;this.height=v;this.data=A;this.isHovered=false;this.color=w;this.redraw=function(D,E){if(arguments.length==1&&typeof arguments[0]=="boolean"){E=arguments[0];D=undefined}var F=g;if(b&&D){F=LChart.Methods.DeepCopy(g);F.color=D}o(this.left,this.top,this.width,this.height,D||this.color,E?this.data:null,F)};this.click=function(E){var D=typeof this.data.click=="function"?this.data.click:(d.click||null);if(D){D(this.data,E)}};if(d.tip.show&&typeof d.tip.content=="function"){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display="inline"}else{var F=this.left+this.width/2+5;var E=this.top+this.height/2;this.tip=r._createTip(d.tip.content.call(d,this.data),F,E);var D=this;D.tip.onclick=function(G){D.click(G)}}};this.hideTip=function(){if(this.tip){this.tip.style.display="none"}}}};var l=function(v,B){var E=function(M,K,N){var L=(N&&d.animateX?v:1)*(q.maxX-q.minX)*r._getFormatDiff(f.vValueType,M,K)/r._getFormatDiff(f.vValueType,f.vMinValue,f.vMaxValue);
return L};for(var D=0,J;J=m[D];D++){var I=(d.animateY?v:1)*e;if(f.multiple){var z=J.color||i[D%i.length];for(var A=0;A<J.value.length;A++){var x=J.value[A];if(x[0]!=null&&x[1]!=null){var H=f.demanCount/2-D;var G=q.startPos-q.labelDistance*A-H*e-(H-0.5)*k;var w=E(x[0],x[1],true);var y=q.minX+E(f.vMinValue,Math.min(x[0],x[1]));if(B>=1){var C={value:x,label:f.lLabels[A],click:J.click,mouseover:J.mouseover,mouseleave:J.mouseleave,text:J.text,indexX:A,indexY:D,bigfontcolor:J.bigfontcolor,bigfontsize:J.bigfontsize,bigfontweight:J.bigfontweight,smallfontcolor:J.smallfontcolor,smallfontsize:J.smallfontsize,smallfontweight:J.smallfontweight};var F=new s(A,D,y,G,w,I,z,C);r.shapes[h].bars.push(F);o(y,G,w,I,z,C);if(!r.coordinates.bars[h][A]){r.coordinates.bars[h][A]=[]}r.coordinates.bars[h][A][D]={left:y,top:G,width:w,height:I,color:z}}else{o(y,G,w,I,z)}}}}else{var x=J.value;if(x[0]!=null&&x[1]!=null){var G=q.startPos-q.labelDistance*D-e/2;var w=E(x[0],x[1],true);var y=q.minX+E(f.vMinValue,Math.min(x[0],x[1]));var z=J.color||(d.bar.useSameColor?"rgba(69,114,167,1)":i[D%i.length]);if(B>=1){J.indexX=D;J.indexY=null;var F=new s(D,null,y,G,w,I,z,J);r.shapes[h].bars.push(F);o(y,G,w,I,z,J);r.coordinates.bars[h][D]={left:y,top:G,width:w,height:I,color:z}}else{o(y,G,w,I,z)}}}}};var j=function(){var x=function(z,D){var C=null;for(var B=0,A;A=r.shapes[h].bars[B];B++){if(A.left<=z&&A.left+A.width>=z&&A.top<=D&&A.top+A.height>=D){C=A;break}}return C};var w=function(A){var A=window.event||A;var y=r._getMouseLoction(A);var z=x(y.X,y.Y);if(z){z.click(A)}};var v=function(F){var F=window.event||F;var A=r._getMouseLoction(F);var E=x(A.X,A.Y);if(E){r._configs.cursorPointer=true}if(u.currentMouseShape!=E){var B=u.currentMouseShape;if(B){var y=typeof B.data.mouseleave=="function"?B.data.mouseleave:(d.mouseleave||null);if(y){y(B.data,F)}}if(b||u.currentMouseShape){r.redrawAll()}u.currentMouseShape=E;for(var D=0,B;B=r.shapes[h].bars[D];D++){if(B!=E&&B.isHovered){B.isHovered=false;if(B.hideTip){B.hideTip()}}}if(E){E.isHovered=true;var C=d.mouseoverTransparency;E.redraw("rgba(255,255,255,"+(C>0&&C<1?C:0.2)+")");if(E.showTip){E.showTip()}var z=typeof E.data.mouseover=="function"?E.data.mouseover:(d.mouseover||null);if(z){z(E.data,F)}}}};r._addEventListener("click",w);r._addEventListener("mousemove",v)};var n=function(){for(var w=0,v;v=r.shapes[h].bars[w];w++){v.redraw(true)}};return{drawSegments:l,mouseEvents:j,redraw:n}};