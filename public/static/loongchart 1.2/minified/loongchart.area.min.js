if(!window.LChart){throw new Error("未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n"+"Not loaded loongchart.core.js which must be loaded before other LChart's js.")}else{LChart.Const.Skins.BlackAndWhite.Area={NodeLineColor:"#ffffff",AlignlineLineColor:null}}LChart.Area=LChart.getCore().__extends({GraphType:"Area"});LChart.Area._spreadSkin=function(b,a){b.node={};b.alignline={};b.node.linecolor=a.NodeLineColor||null;b.alignline.linecolor=a.AlignlineLineColor||null};LChart.Area._getDefaultOptions=function(b){var a=LChart.Methods.Extend(b,{invertAxis:false,area:{linecolors:null,linewidth:null,smoothline:false,fillcolors:null},labelAxis:{valueType:null,content:function(c){if(this.valueType=="d"){return c.format("yyyy-MM-dd")}else{if(this.valueType=="t"){return c.format("MM-dd hh:mm")}else{if(this.valueType=="m"){return c.format("hh:mm:ss.S")}else{return c.toString()}}}},minvalue:null,maxvalue:null,interval:null,sort:true},valueAxis:{heap:false},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:false,spotdistance:10,content:function(e,g){if(g){var d="<div>";for(var c=0;c<e.length;c++){var f=this.valueType=="p"?e[c].vpercent.toFixed(2)+"%":e[c].vvalue.toString();d+=(c>0?"<br/>":"")+e[c].text+" : "+f}d+="&nbsp;</div>";return d}else{var f=this.valueType=="p"?e.vpercent.toFixed(2)+"%":e.vvalue.toString();if(this.valueType=="d"){f=e.vvalue.format("yyyy-MM-dd")}else{if(this.valueType=="t"){f=e.vvalue.format("MM-dd hh:mm")}else{if(this.valueType=="m"){f=e.vvalue.format("hh:mm:ss.S")}}}return"<div>&nbsp;"+(e.text?e.text+"：":"")+f+"&nbsp;</div>"}}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return a};LChart.Area._getCheckOptions=function(){return{__top:[["invertAxis","b"]],area:[["linecolors","ca"],["linewidth","n"],["fillcolors","ca"]],labelAxis:[["valueType","s"],["content","f"],["interval","n"],["sort","b"]],valueAxis:[["heap","b"]],node:[["show","b"],["nodetype","s"],["linecolor","c"],["linewidth","n"],["length","n"],["fillcolor","c"]],tip:[["merge","b"],["spotdistance","n"]],alignline:[["verticalline","b"],["horizontalline","b"],["linecolor","c"]],scale:[["drawvertical","b"]]}};LChart.Area._drawgraphic=function(I,o,C,j){I._configs.recreateAssists=true;var B=j.invertAxis;var H=o==I.ID;if(H){I._configs.invertAxis=B;if(j.labelAxis.valueType=="p"){throw new Error(I._messages.WrongParam+I._messages.LabelAxisValueTypeCannotBePercent)}}var K=I._configs.specificConfig[o];var m=I._formatAxisData(j.valueAxis.heap);if(m.tuftCount<2){throw new Error(I._messages.WrongData+I._messages.NeedLeastTwoPoints)}var e=I._calculateOutersValid();var G=I._computeAxis(e);var F=I._getDrawableCoordinate();var g=j.labelAxis.valueType;var b=m.vValueType=="p";var l=m.heapCompute;var x=j.area.smoothline;var d=x?I.DrawFigures.createSmoothLine:I.DrawFigures.createPointsLine;if(l){K.heaps=[];for(var E=0;E<m.tuftCount;E++){K.heaps[E]=[];var w=0;for(var A=0;A<m.demanCount;A++){var J=C[A].value[E];var h=b?C[A].percent[E]:(g?J[1]:J);w+=h||0;K.heaps[E][A]=w}w=0}}if(!I.coordinates.area){I.coordinates.area={}}I.coordinates.area[o]={nodes:[]};I.shapes[o]={nodes:[]};var v=LChart.Methods.IsNumber(j.tip.spotdistance)&&j.tip.spotdistance>0?j.tip.spotdistance:10;var u=j.alignline.linecolor||LChart.Const.Defaults.AlignLineColor;var f=(j.area.fillcolors&&j.area.fillcolors.length>0?j.area.fillcolors:null)||LChart.Const.Defaults.TransparentColors;var p=(j.area.linecolors&&j.area.linecolors.length>0?j.area.linecolors:null)||LChart.Const.Defaults.FillColors;if(H){I.coordinates.draw=F;I._configs.legendColors=p}K.mergeTips=[];var t={};var z=(B?G.maxX-G.minX:G.maxY-G.minY);var n=(B?G.maxY-G.minY:G.maxX-G.minX);var a=j.node.length||LChart.Methods.CapValue(n/100,10,6);var s=function(i,N,M,k,L){this.index=i;this.centerX=N;this.centerY=M;this.isHovered=false;this.nodelength=k;this.data=L;this.click=function(P){var O=typeof this.data.click=="function"?this.data.click:(j.click||null);if(O){O(this.data,P)}};if(j.tip.show&&typeof j.tip.content=="function"){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display="inline"}else{var Q=this.centerX+a+5;var P=this.centerY-a-10;this.tip=I._createTip(j.tip.content.call(j,this.data,false),Q,P);if(this.centerX+this.tip.clientWidth>G.maxX){I._changeTip(this.tip,Q-5-a-this.tip.clientWidth)}var O=this;O.tip.onclick=function(R){O.click(R)}}};this.hideTip=function(){if(this.tip){this.tip.style.display="none"}}}};var r=function(Q,P,S,M){var L=j.node;if(L.show){var O=M.nodelength||a;var k=M.nodetype||L.nodetype||"c";var i=M.nodelinecolor||L.linecolor||S;var R=M.nodelinewidth||L.linewidth;var N=M.nodefillcolor||L.fillcolor||S;I.DrawFigures.createPointElement(k,Q,P,O,N,true,i,R,true,true)}};var c=function(N,k,M){var O=N.__copy();for(var L=k.length-1;L>=0;L--){O.push(k[L])}I.DrawFigures.createCloseFigure(O,M,0,null,x,B)};var y=function(S,ai){var af=function(k){var i=(j.animation?S:1)*z*I._getFormatDiff(m.vValueType,m.vMinValue,k)/I._getFormatDiff(m.vValueType,m.vMinValue,m.vMaxValue);
return i};var M=function(i){if(g){return n*I._getFormatDiff(m.lValueType,m.lMinValue,i)/I._getFormatDiff(m.lValueType,m.lMinValue,m.lMaxValue)}else{if(m.multiple){return n*i/(m.tuftCount-1)}else{return G.labelDistance*i}}};var U=function(ap,ar,av,au,an,aA,az,ax,aq,ay,aw,k){if(ai>=1){var ao={vvalue:aA,lvalue:az,text:ax};if(aq!=null){ao.vpercent=aq}if(typeof ay=="function"){ao.click=ay}if(typeof aw=="function"){ao.mouseover=aw}if(typeof k=="function"){ao.mouseleave=k}var at=new s(ar,av,au,an,ao);I.shapes[o].nodes.push(at);if(ap>=0){I.coordinates.area[o].nodes[ap][ar]={centerX:av,centerY:au,length:an}}else{I.coordinates.area[o].nodes[ar]={centerX:av,centerY:au,length:an}}}};var ak,O,am,Q,P;if(m.multiple){var ab=[];var ae=[];var W=[];for(var ad=0,aj;aj=C[ad];ad++){var ac=aj.linewidth||j.area.linewidth||LChart.Const.Defaults.LineWidth;var ag=aj.color||p[ad%p.length];var al=f[ad%f.length];var T=aj.text||"";if(ai>=1){I.coordinates.area[o].nodes[ad]=[]}var R=aj.value.length;var L=true;for(var Z=0;Z<R;Z++){subitem=aj.value[Z];ak=g?subitem[0]:Z;O=g?subitem[1]:subitem;am=b?aj.percent[Z]:null;vdrawvalue=b?am:O;if(vdrawvalue!=null&&ak!=null){Q=(B?G.maxY-M(ak):G.minX+M(ak));var V=af(l?K.heaps[Z][ad]:vdrawvalue);P=B?G.minX+V:G.maxY-V;if(L){ab.push(B?[G.minX,Q]:[Q,G.maxY]);L=false}ab.push(B?[P,Q]:[Q,P]);U(ad,Z,B?P:Q,B?Q:P,aj.nodelength||a,O,ak,T,am,aj.click,aj.mouseover,aj.mouseleave)}}var N=ab[ab.length-1];ab.push(B?[G.minX,N[1]]:[N[0],G.maxY]);var ah=ab.slice(1,ab.length-1);if(l&&ad>0){c(ah,ae,al)}else{I.DrawFigures.createCloseFigure(ab,al,0,null,x,B)}var X={linepoints:ah,points:ab,fillcolor:al,linewidth:ac,linecolor:ag,nodetype:aj.nodetype,nodelength:aj.nodelength,nodelinecolor:aj.nodelinecolor,nodelinewidth:aj.nodelinewidth,nodefillcolor:aj.nodefillcolor};W.push(X);if(ai>=1){if(!t.areainfos){t.areainfos=[]}t.areainfos[ad]=X}ae=ah.__copy();ab=[]}for(var ad=0;ad<W.length;ad++){var ah=W[ad].linepoints;d(ah,W[ad].linewidth,W[ad].linecolor,B);for(var aa=0;aa<ah.length;aa++){var Y=ah[aa];r(Y[0],Y[1],W[ad].linecolor,W[ad])}}}else{var ac=j.area.linewidth||LChart.Const.Defaults.LineWidth;var ag=p[0];var al=f[0];var ab=[];var R=C.length;var L=true;for(var ad=0;ad<R;ad++){subitem=C[ad];var T=subitem.text||"";ak=g?subitem.value[0]:ad;O=g?subitem.value[1]:subitem.value;am=b?C[ad].percent:null;vdrawvalue=b?am:O;if(vdrawvalue!=null&&ak!=null){Q=B?G.maxY-M(ak):G.minX+M(ak);P=B?G.minX+af(vdrawvalue):G.maxY-af(vdrawvalue);if(L){ab.push(B?[G.minX,Q]:[Q,G.maxY]);L=false}ab.push(B?[P,Q,ad]:[Q,P,ad]);U(-1,ad,B?P:Q,B?Q:P,subitem.nodelength||a,O,ak,T,am,subitem.click,subitem.mouseover,subitem.mouseleave)}}var N=ab[ab.length-1];ab.push(B?[G.minX,N[1]]:[N[0],G.maxY]);if(ai>=1){t.points=ab;t.linewidth=ac;t.linecolor=ag;t.fillcolor=al}I.DrawFigures.createCloseFigure(ab,al,0,null,x,B);var ah=ab.slice(1,ab.length-1);d(ah,ac,ag,B);for(var aa=0;aa<ah.length;aa++){var Y=ah[aa];r(Y[0],Y[1],ag,C[Y[2]])}}};var q=function(){var M=function(N,R){var Q=null;for(var P=I.shapes[o].nodes.length-1;P>=0;P--){var O=I.shapes[o].nodes[P];if(Math.sqrt(Math.pow(N-O.centerX,2)+Math.pow(R-O.centerY,2))<=O.nodelength/2){Q=O;break}}return Q};var L=function(Z,X){var Q=[];var T=0;if(X<=G.maxY&&X>=G.minY&&Z>=G.minX&&Z<=G.maxX){var U=-1;var Y=n/(m.tuftCount-1);var N=(B?G.maxY:G.minX);var aa=(B?X:Z);for(var R=1;R<m.tuftCount;R++){var P=N+(B?-R*Y:(R-1)*Y);var O=N+(B?-(R-1)*Y:R*Y);if(P<=aa&&O>=aa){var W=Math.abs(P-aa);var S=Math.abs(O-aa);if(W<v&&W<=S){U=B?R:R-1;T=P}else{if(S<v&&S<=W){U=B?R-1:R;T=O}}break}}for(var R=0,V;V=I.shapes[o].nodes[R];R++){if(V.index==U){Q.push(V)}}}return{shapes:Q,loc:T}};var k=function(P){var P=window.event||P;var N=I._getMouseLoction(P);var O=M(N.X,N.Y);if(O){O.click(P)}};var i=function(W){var W=window.event||W;var Z=I._getMouseLoction(W);var P=m.lValueType||!m.multiple;var Q=M(Z.X,Z.Y);if(Q){I._configs.cursorPointer=true}if(K.currentMouseShape!=Q){var X=K.currentMouseShape;if(X){var N=typeof X.data.mouseleave=="function"?X.data.mouseleave:(j.mouseleave||null);if(N){N(X.data,W)}}K.currentMouseShape=Q;for(var V=0,X;X=I.shapes[o].nodes[V];V++){if(X!=Q&&X.isHovered){X.isHovered=false;if(P&&X.hideTip){X.hideTip()}}}if(Q){Q.isHovered=true;if(j.alignline.verticalline||j.alignline.horizontalline){I.redrawAll()}if(j.alignline.verticalline){I.DrawFigures.createLine(Q.centerX,G.minY,Q.centerX,G.maxY+1,1,u)}if(j.alignline.horizontalline){I.DrawFigures.createLine(G.minX,Q.centerY,G.maxX,Q.centerY,1,u)}if(Q.showTip&&P){Q.showTip()}var aa=typeof Q.data.mouseover=="function"?Q.data.mouseover:(j.mouseover||null);if(aa){aa(Q.data,W)}}else{if(P&&(j.alignline.verticalline||j.alignline.horizontalline)){I.redrawAll()}}}if(!P){var S=L(Z.X,Z.Y);if(K.loc!=S.loc){K.loc=S.loc;if(j.tip.merge){for(var V=0;V<K.mergeTips.length;V++){if(K.mergeTips[V]){K.mergeTips[V].style.display="none"}}}else{for(var V=0,X;X=I.shapes[o].nodes[V];V++){if(X.hideTip){X.hideTip()}}}if(B&&j.alignline.horizontalline||!B&&j.alignline.verticalline){I.redrawAll()}if(S.shapes.length){if(!B&&j.alignline.verticalline){I.DrawFigures.createLine(S.loc,G.minY,S.loc,G.maxY+1,1,u)
}if(B&&j.alignline.horizontalline){I.DrawFigures.createLine(G.minX,S.loc,G.maxX,S.loc,1,u)}if(j.tip.merge){if(S.shapes[0].showTip){var Y=K.mergeTips[S.shapes[0].index];if(!Y){var U=[];var O=0;var ab=0;for(var V=0,X;X=S.shapes[V];V++){U.push(X.data);ab+=X.centerY;O+=X.centerX}var T=O/S.shapes.length+5;var R=ab/S.shapes.length;Y=I._createTip(j.tip.content.call(j,U,true),T,R);I._changeTip(Y,null,R-Y.clientHeight/2+10);if(T+Y.clientWidth>G.maxX){I._changeTip(Y,T-5-a-Y.clientWidth)}K.mergeTips[S.shapes[0].index]=Y}Y.style.display="inline"}}else{for(var V=0,X;X=S.shapes[V];V++){if(X.showTip){X.showTip()}}}}}}};I._addEventListener("click",k);I._addEventListener("mousemove",i)};var D=function(){if(m.multiple){var k=t.areainfos;for(var O=0;O<k.length;O++){var P=k[O].points;var L=P.slice(1,P.length-1);if(l&&O>0){c(L,N,k[O].fillcolor)}else{I.DrawFigures.createCloseFigure(P,k[O].fillcolor,0,null,x,B)}var N=L.__copy()}for(var O=0;O<k.length;O++){var P=k[O].points;var L=P.slice(1,P.length-1);d(L,k[O].linewidth,k[O].linecolor,B);for(var M=0;M<L.length;M++){r(L[M][0],L[M][1],k[O].linecolor,k[O])}}}else{var P=t.points;I.DrawFigures.createCloseFigure(P,t.fillcolor,0,null,x,B);var L=P.slice(1,P.length-1);d(L,t.linewidth,t.linecolor,B);for(var M=0;M<L.length;M++){r(L[M][0],L[M][1],t.linecolor,C[L[M][2]])}}};return{drawSegments:y,mouseEvents:q,redraw:D}};